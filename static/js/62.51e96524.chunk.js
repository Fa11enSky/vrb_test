"use strict";(self.webpackChunkvrb_test=self.webpackChunkvrb_test||[]).push([[62],{4696:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(5043),n=s(579);const i=e=>{let{children:t,close:s}=e;return(0,a.useEffect)((()=>{const e=e=>{"Escape"===e.code&&s()};return document.querySelector("body").classList.add("lock"),window.addEventListener("keydown",e),()=>{document.querySelector("body").classList.remove("lock"),window.removeEventListener("keydown",e)}}),[s]),(0,n.jsx)("div",{onClick:e=>{e.currentTarget===e.target&&s()},style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#00000065",overflowY:"auto",zIndex:900},children:t})}},2450:(e,t,s)=>{s.d(t,{A:()=>n});var a=s(7950);const n=e=>{let{children:t}=e;const s=document.getElementById("modal-root");return a.createPortal(t,s)}},2026:(e,t,s)=>{s.d(t,{A:()=>Y});var a=s(5043);const n="styles_movieItem__FEOj+",i="styles_optList__caSlT",l="styles_optBtn__z9Cnp",r="styles_optIcon__5ZOfg",c="styles_title__nG37w",o="styles_thumb__PJomn",d="styles_date__Ot7V6",m="styles_rating__KqpNa",u="styles_favorite__vQzuy";var p=s(5394),_=s(5051),h=s(6720),x=s(184),j=s(4180),g=s(3216);const v="styles_formEdit__wT9Da",y="styles_formTitle__L7ENl",f="styles_imageLabel__2iBzb",b="styles_plus__L01mA",w="styles_imageInput__+gI8C",N="styles_smbBtn__dCi73";var C=s(9955),k=s(7154);const S=async(e,t)=>{const{data:s}=await k.A.put("/films/".concat(t),e);return s};var E=s(3726),L=s(579);const A=e=>{let{movie:t,close:s}=e;const[n,i]=(0,a.useState)(t.title),[l,r]=(0,a.useState)(t.director),[c,o]=(0,a.useState)(t.actors.join(",")),[d,m]=(0,a.useState)(t.image),[u,p]=(0,a.useState)(t.release_date),[h,x]=(0,a.useState)(t.rating.toString()),[g,k]=(0,a.useState)(t.description),{movies:A,setMovies:F,favorites:D,setFavorites:I}=(0,j.Y)(),T=(0,a.useRef)(null),Y=e=>{const{name:t,value:s}=e.target;switch(t){case"title":i(s);break;case"director":r(s);break;case"actors":o(s);break;case"date":p(s);break;case"rating":x(s);break;case"description":k(s)}};return(0,L.jsxs)("form",{className:v,onSubmit:async e=>{e.preventDefault();const a={title:n.trim(),director:l.trim(),actors:c.split(","),image:d,release_date:u,rating:h,description:g.trim()};if(d!==t.image){const e=T.current.files[0],t=await(0,C.A)(e);a.image=t}try{const e=await S(a,t._id),n=A.findIndex((t=>t._id===e._id)),i=[...A];i.splice(n,1,e),F(i);const l=D.findIndex((t=>t._id===e._id));if(-1!==l){const t=[...D];t.splice(l,1,e),I(t)}E.Notify.success("Movie updated successfully"),s()}catch(i){E.Notify.failure(e.message)}},children:[(0,L.jsx)("p",{className:y,children:" Edit movie data"}),(0,L.jsxs)("label",{className:f,htmlFor:"image",children:[(0,L.jsx)("img",{src:d||t.image,alt:"poster",width:100}),(0,L.jsx)(_.pi5,{className:b}),(0,L.jsx)("input",{ref:T,className:w,type:"file",name:"image",id:"image",accept:"image/*",onChange:e=>{const t=e.target.files[0];t&&m(URL.createObjectURL(t))}})]}),(0,L.jsxs)("label",{children:["Title",(0,L.jsx)("input",{onChange:Y,type:"text",name:"title",id:"title",value:n})]}),(0,L.jsxs)("label",{children:["Rating (1.0...10)",(0,L.jsx)("input",{onChange:Y,type:"string",name:"rating",id:"rating",value:h,pattern:"[0-9]{1,2}(\\.[0-9]{1,2})?"})]}),(0,L.jsxs)("label",{children:["Director",(0,L.jsx)("input",{onChange:Y,type:"text",name:"director",id:"director",value:l})]}),(0,L.jsxs)("label",{children:["Actors"," ",(0,L.jsx)("input",{onChange:Y,type:"text",name:"actors",id:"actors",value:c})]}),(0,L.jsxs)("label",{children:["Release date (YYYY-MM-DD)",(0,L.jsx)("input",{onChange:Y,type:"text",name:"date",id:"date",value:u,pattern:"\\d{4}-\\d{2}-\\d{2}"})]}),(0,L.jsxs)("label",{children:["Description",(0,L.jsx)("textarea",{onChange:Y,type:"text",name:"description",id:"description",value:g})]}),(0,L.jsx)("button",{className:N,type:"submit",children:"Edit"})]})};var F=s(2450),D=s(4696);const I=e=>{let{item:t}=e;const[s,v]=(0,a.useState)(!1),{_id:y,title:f,image:b,release_date:w,rating:N}=t,{toggleFavorites:C,permanentDelete:k,favorites:S}=(0,j.Y)(),E=(0,g.Zp)(),I=()=>{v(!s)},T=S.map((e=>e._id)).includes(y);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("li",{onClick:e=>{const{target:t}=e;"BUTTON"!==t.nodeName&&E("/details/".concat(y))},className:n,children:[(0,L.jsxs)("ul",{className:i,children:[(0,L.jsx)("li",{children:(0,L.jsx)("button",{onClick:()=>{C(t)},className:l,children:(0,L.jsx)(p.L4$,{className:"".concat(r," ").concat(T?u:"")})})}),(0,L.jsx)("li",{children:(0,L.jsx)("button",{onClick:()=>{k(y)},className:l,children:(0,L.jsx)(x.H8h,{className:r})})}),(0,L.jsx)("li",{children:(0,L.jsx)("button",{onClick:I,className:l,children:(0,L.jsx)(x.F7,{className:r})})})]}),(0,L.jsx)("div",{className:o,children:(0,L.jsx)("img",{src:b||"https://t3.ftcdn.net/jpg/04/60/01/36/360_F_460013622_6xF8uN6ubMvLx0tAJECBHfKPoNOR5cRa.jpg",alt:"".concat(f," poster")})}),(0,L.jsx)("h2",{className:c,children:f}),(0,L.jsxs)("span",{className:d,children:[(0,L.jsx)(h.Hvs,{}),(0,L.jsx)("span",{children:w})]}),(0,L.jsxs)("span",{className:m,children:[(0,L.jsx)(_.Vis,{}),(0,L.jsx)("span",{children:N})]})]}),s&&(0,L.jsx)(F.A,{children:(0,L.jsx)(D.A,{close:I,children:(0,L.jsx)(A,{movie:t,close:I})})})]})},T="styles_movieList__+plJB",Y=e=>{let{data:t}=e;return(0,L.jsx)("ul",{className:T,children:t.map((e=>(0,L.jsx)(I,{item:e},e._id)))})}},1062:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var a=s(2026),n=s(4180),i=s(579);const l=()=>{const{favorites:e,permanentDelete:t}=(0,n.Y)();return(0,i.jsx)("section",{children:e.length>0?(0,i.jsx)(a.A,{toDelete:t,data:e}):(0,i.jsx)("div",{children:"First need add to fav"})})}},9955:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(3712);const n=new(s.n(a)().Cloudinary)({cloud_name:"dtsw0uqfz"}),i=async e=>{try{const t=new FormData;t.append("file",e),t.append("upload_preset","ftw0ehjd");const s=await fetch("https://api.cloudinary.com/v1_1/".concat(n.config().cloud_name,"/upload"),{method:"POST",body:t});if(!s.ok)throw new Error("Failed to upload image");return(await s.json()).secure_url}catch(t){throw console.error("Error uploading image to Cloudinary:",t),t}}}}]);
//# sourceMappingURL=62.51e96524.chunk.js.map